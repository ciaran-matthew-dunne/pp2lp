require open pp2lp.B;

// SUB 1, 2.
rule esub $x $E (#var $x) โช $E
with esub $x $E (#var $y) โช ?exp (#var $y) (enf $x (#var $y));

// SUB 3, 4, 5.
rule psub $x $E ($P โง $Q) โช (psub $x $E $P) โง (psub $x $E $Q)
with psub $x $E ($P โ $Q) โช (psub $x $E $P) โ (psub $x $E $Q)
with psub $x $E (ยฌ $P) โช ยฌ (psub $x $E $P);

// SUB 6, 7.
rule psub $x _ (โ $x $P) โช โ $x $P
with psub $x $E (โ $y $P)
  โช ?prd (โ $y (psub $x $E $P)) (enf $x (#var $y));

// SUB 12.
rule psub $x $E ($D = $F)
  โช (esub $x $E $D) = (esub $x $E $F);

// esub for pairs (cf. ยง1.5).
rule esub $x $E ($D โฆ $F)
  โช (esub $x $E $D) โฆ (esub $x $E $F);

// SUB 14.
rule psub $x $E ($F โ $s)
  โช (esub $x $E $F) โ (esub $x $E $s);

// SUB 15.
rule esub $x $E (choice $s) โช choice (esub $x $E $s);

// SUB 16, 17.
rule esub $x $E ($s ร $t) โช (esub $x $E $s) ร (esub $x $E $t)
with esub $x $E (๐ซ $s) โช ๐ซ (esub $x $E $s);

// SUB 18, 19.
rule esub $x _ (comp $x $P) โช comp $x $P
with esub $x $E (comp $y $P)
  โช ?exp (comp $y (psub $x $E $P)) (enf $x (#var $y));

// SUB 20.
rule esub _ _ big โช big;
